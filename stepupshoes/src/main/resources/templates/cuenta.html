<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: head}">
    <title>Mi Cuenta - StepUp Shoes</title>
</head>
<body>
    <div th:replace="~{fragments/header :: header}"></div>

    <div class="cuenta-container">
        <div class="cuenta-sidebar">
            <div class="user-profile">
                <div class="user-avatar">
                    <img th:src="${usuario.avatarUrl}" th:alt="${usuario.nombre}" th:if="${usuario.avatarUrl}">
                    <div class="avatar-placeholder" th:unless="${usuario.avatarUrl}">
                        <span th:text="${#strings.substring(usuario.nombre, 0, 1)}"></span>
                    </div>
                </div>
                <div class="user-info">
                    <h3 th:text="${usuario.nombre}">Usuario</h3>
                    <p th:text="${usuario.email}">usuario@email.com</p>
                    <span class="member-since">Miembro desde 2024</span>
                </div>
            </div>

            <nav class="cuenta-menu">
                <a href="#perfil" class="menu-item active" onclick="mostrarSeccion('perfil')">
                    <span class="menu-icon">üë§</span>
                    Mi Perfil
                </a>
                <a href="#pedidos" class="menu-item" onclick="mostrarSeccion('pedidos')">
                    <span class="menu-icon">üì¶</span>
                    Mis Pedidos
                </a>
                <a href="#direcciones" class="menu-item" onclick="mostrarSeccion('direcciones')">
                    <span class="menu-icon">üè†</span>
                    Direcciones
                </a>
                <a href="#favoritos" class="menu-item" onclick="mostrarSeccion('favoritos')">
                    <span class="menu-icon">‚ù§Ô∏è</span>
                    Favoritos
                </a>
                <a href="#seguridad" class="menu-item" onclick="mostrarSeccion('seguridad')">
                    <span class="menu-icon">üîí</span>
                    Seguridad
                </a>
                <!-- ‚úÖ CORREGIDO: th:href en lugar de href -->
                <a th:href="@{/logout}" class="menu-item logout">
                    <span class="menu-icon">üö™</span>
                    Cerrar Sesi√≥n
                </a>
            </nav>
        </div>

        <div class="cuenta-content">
            <!-- Secci√≥n Perfil -->
            <div id="perfil" class="cuenta-seccion active">
                <div class="seccion-header">
                    <h2>Mi Perfil</h2>
                    <p>Gestiona tu informaci√≥n personal</p>
                </div>

                <form class="profile-form">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="profileNombre">Nombre Completo</label>
                            <input type="text" id="profileNombre" th:value="${usuario.nombre}">
                        </div>
                        <div class="form-group">
                            <label for="profileEmail">Email</label>
                            <input type="email" id="profileEmail" th:value="${usuario.email}" readonly>
                        </div>
                        <div class="form-group">
                            <label for="profileTelefono">Tel√©fono</label>
                            <input type="tel" id="profileTelefono" placeholder="+506 1234 5678">
                        </div>
                        <div class="form-group">
                            <label for="profileFechaNacimiento">Fecha de Nacimiento</label>
                            <input type="date" id="profileFechaNacimiento">
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-outline">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                    </div>
                </form>

                <div class="account-stats">
                    <h3>Tu actividad en StepUp</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" th:text="${totalPedidos != null} ? ${totalPedidos} : '0'">0</div>
                            <div class="stat-label">Pedidos Realizados</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" th:text="${totalFavoritos != null} ? ${totalFavoritos} : '0'">0</div>
                            <div class="stat-label">Productos Favoritos</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" th:text="'$' + (${totalGastado != null} ? ${totalGastado} : '0')">$0</div>
                            <div class="stat-label">Total Gastado</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" th:text="${puntos != null} ? ${puntos} : '0'">0</div>
                            <div class="stat-label">Puntos Acumulados</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Las otras secciones permanecen igual pero con datos est√°ticos -->
            <div id="pedidos" class="cuenta-seccion">
                <div class="seccion-header">
                    <h2>Mis Pedidos</h2>
                    <p>Revisa el estado de tus compras</p>
                </div>
                <div class="no-pedidos">
                    <div class="empty-state">
                        <div class="empty-icon">üì¶</div>
                        <h3>No tienes pedidos a√∫n</h3>
                        <p>Explora nuestro cat√°logo y realiza tu primera compra</p>
                        <!-- ‚úÖ CORREGIDO: th:href -->
                        <a th:href="@{/catalogo}" class="btn btn-primary">Explorar Productos</a>
                    </div>
                </div>
            </div>

            <!-- Las dem√°s secciones similares... -->
        </div>
    </div>

    <div th:replace="~{fragments/footer :: footer}"></div>

    <!-- El CSS permanece igual -->
</body>
</html>