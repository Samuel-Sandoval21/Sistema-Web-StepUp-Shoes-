<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StepUp Shoes - Navegaci√≥n</title>
    <style>
        /* Variables CSS */
        :root {
            --primary-color: #e44d26;
            --secondary-color: #2c3e50;
            --accent-color: #3498db;
            --light-gray: #f5f5f5;
            --dark-gray: #333;
            --white: #ffffff;
            --shadow: 0 2px 10px rgba(0,0,0,0.1);
            --border-radius: 8px;
        }

        /* Estilos para navegaci√≥n m√≥vil */
        .nav-mobile {
            display: none;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: var(--white);
            border-bottom: 1px solid var(--light-gray);
            position: relative;
            z-index: 1001;
        }

        .nav-toggle {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            width: 40px;
            height: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 4px;
        }

        .nav-toggle span {
            display: block;
            width: 25px;
            height: 3px;
            background: var(--dark-gray);
            transition: 0.3s;
            transform-origin: center;
        }

        .nav-toggle[aria-expanded="true"] span:nth-child(1) {
            transform: rotate(45deg) translate(6px, 6px);
        }

        .nav-toggle[aria-expanded="true"] span:nth-child(2) {
            opacity: 0;
        }

        .nav-toggle[aria-expanded="true"] span:nth-child(3) {
            transform: rotate(-45deg) translate(6px, -6px);
        }

        .logo-mobile {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--primary-color);
            text-decoration: none;
        }

        .cart-mobile {
            position: relative;
            text-decoration: none;
            color: var(--dark-gray);
            font-size: 1.2rem;
            padding: 0.5rem;
            display: block;
        }

        .cart-mobile span {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--primary-color);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .mobile-menu {
            position: fixed;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            transition: left 0.3s ease;
        }

        .mobile-menu.active {
            left: 0;
        }

        .mobile-menu-content {
            width: 80%;
            max-width: 300px;
            height: 100%;
            background: var(--white);
            padding: 1rem;
            overflow-y: auto;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }

        .mobile-menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--light-gray);
            margin-bottom: 1rem;
        }

        .mobile-menu-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .mobile-menu-links {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .mobile-menu-links a {
            padding: 1rem;
            text-decoration: none;
            color: var(--dark-gray);
            border-radius: var(--border-radius);
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .mobile-menu-links a:hover {
            background: var(--light-gray);
            color: var(--primary-color);
        }

        .mobile-menu-divider {
            height: 1px;
            background: var(--light-gray);
            margin: 1rem 0;
        }

        .mobile-auth-links, .mobile-user-menu {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        /* Buscador expandible */
        .search-expanded {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 2001;
        }

        .search-expanded.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .search-expanded-content {
            background: var(--white);
            padding: 2rem;
            margin-top: 80px;
            border-radius: var(--border-radius) var(--border-radius) 0 0;
            min-height: calc(100vh - 80px);
        }

        .search-form-expanded {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            position: relative;
        }

        .search-form-expanded input {
            flex: 1;
            padding: 1rem;
            border: 2px solid var(--primary-color);
            border-radius: var(--border-radius);
            font-size: 1.1rem;
            outline: none;
        }

        .search-form-expanded button {
            padding: 1rem;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .search-form-expanded button:hover {
            background: #c0392b;
        }

        .search-close {
            background: var(--light-gray) !important;
            color: var(--dark-gray) !important;
        }

        .search-close:hover {
            background: #e0e0e0 !important;
        }

        .suggestion-category h4 {
            margin-bottom: 1rem;
            color: var(--secondary-color);
        }

        .suggestion-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .suggestion-tags a {
            background: var(--light-gray);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            text-decoration: none;
            color: var(--dark-gray);
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .suggestion-tags a:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }

        /* Utilidades */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Animaciones */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideInLeft {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-mobile {
                display: flex;
            }
        }

        @media (max-width: 480px) {
            .search-expanded-content {
                padding: 1rem;
                margin-top: 60px;
            }
            
            .search-form-expanded {
                flex-direction: column;
            }
            
            .mobile-menu-content {
                width: 85%;
            }
        }
    </style>
</head>
<body>
<div th:fragment="nav">
    <!-- Navegaci√≥n m√≥vil (hamburger menu) -->
    <nav class="nav-mobile" aria-label="Navegaci√≥n principal">
        <button class="nav-toggle" id="navToggle" aria-label="Abrir men√∫" aria-expanded="false">
            <span></span>
            <span></span>
            <span></span>
        </button>
        
        <a th:href="@{/}" class="logo-mobile">StepUp Shoes</a>
        
        <div class="nav-mobile-actions">
            <a href="#" onclick="mostrarCarrito(); return false;" class="cart-mobile" aria-label="Carrito de compras">
                üõí <span id="carrito-count-mobile">0</span>
            </a>
        </div>
    </nav>

    <!-- Men√∫ m√≥vil desplegable -->
    <div class="mobile-menu" id="mobileMenu" aria-hidden="true">
        <div class="mobile-menu-content">
            <div class="mobile-menu-header">
                <span style="font-weight: bold; color: var(--secondary-color);">Men√∫</span>
                <button class="mobile-menu-close" id="mobileMenuClose" aria-label="Cerrar men√∫">&times;</button>
            </div>
            
            <nav class="mobile-menu-links" aria-label="Navegaci√≥n m√≥vil">
                <a th:href="@{/}" onclick="cerrarMenuMobile()">üè† Inicio</a>
                <a th:href="@{/catalogo}" onclick="cerrarMenuMobile()">üëü Cat√°logo</a>
                <a th:href="@{/promociones}" onclick="cerrarMenuMobile()">üéØ Promociones</a>
                <a th:href="@{/contacto}" onclick="cerrarMenuMobile()">üìû Contacto</a>
                
                <div class="mobile-menu-divider"></div>
                
                <div class="mobile-auth-links" id="mobileAuthLinks">
                    <a href="#" onclick="mostrarLogin(); cerrarMenuMobile(); return false;">üîê Iniciar Sesi√≥n</a>
                    <a href="#" onclick="mostrarRegistro(); cerrarMenuMobile(); return false;">üë§ Crear Cuenta</a>
                </div>
                
                <div class="mobile-user-menu" id="mobileUserMenu" style="display: none;">
                    <a href="/cuenta" onclick="cerrarMenuMobile()">üìä Mi Cuenta</a>
                    <a href="/pedidos" onclick="cerrarMenuMobile()">üì¶ Mis Pedidos</a>
                    <a href="#" onclick="logout(); cerrarMenuMobile(); return false;">üö™ Cerrar Sesi√≥n</a>
                </div>
            </nav>
        </div>
    </div>

    <!-- Buscador expandible -->
    <div class="search-expanded" id="searchExpanded" aria-hidden="true">
        <div class="search-expanded-content">
            <form th:action="@{/catalogo/buscar}" method="get" class="search-form-expanded" role="search">
                <label for="search-input" class="sr-only">Buscar productos</label>
                <input type="text" id="search-input" name="q" placeholder="¬øQu√© est√°s buscando? Ej: Nike, Adidas, Running..." autocomplete="off" required>
                <button type="submit" aria-label="Buscar">üîç Buscar</button>
                <button type="button" class="search-close" id="searchClose" aria-label="Cerrar b√∫squeda">&times;</button>
            </form>
            
            <div class="search-suggestions">
                <div class="suggestion-category">
                    <h4>üî• Sugerencias populares</h4>
                    <div class="suggestion-tags">
                        <a th:href="@{/catalogo/buscar?q=Nike}">Nike Air Force</a>
                        <a th:href="@{/catalogo/buscar?q=Adidas}">Adidas Ultraboost</a>
                        <a th:href="@{/catalogo/buscar?q=Running}">Zapatillas Running</a>
                        <a th:href="@{/catalogo/buscar?q=Zapatillas}">Zapatillas Casual</a>
                        <a th:href="@{/catalogo/buscar?q=Deportivas}">Deportivas</a>
                        <a th:href="@{/catalogo/buscar?q=Ofertas}">En Oferta</a>
                    </div>
                </div>
                
                <div class="suggestion-category" style="margin-top: 2rem;">
                    <h4>üè∑Ô∏è Categor√≠as populares</h4>
                    <div class="suggestion-tags">
                        <a th:href="@{/catalogo?categoria=running}">Running</a>
                        <a th:href="@{/catalogo?categoria=basketball}">Basketball</a>
                        <a th:href="@{/catalogo?categoria=casual}">Casual</a>
                        <a th:href="@{/catalogo?categoria=formal}">Formal</a>
                        <a th:href="@{/catalogo?categoria=outdoor}">Outdoor</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

    <!-- NAVBAR DE ESCRITORIO (NUEVO) -->
<nav class="navbar-desktop">
    <div class="nav-left">
        <a href="/" class="logo-desktop">
            <span class="logo-main">StepUp</span><span class="logo-sub">Shoes</span>
        </a>

        <ul class="nav-links-desktop">
            <li><a th:href="@{/}">Inicio</a></li>
            <li><a th:href="@{/catalogo}">Cat√°logo</a></li>
            <li><a th:href="@{/promociones}">Promociones</a></li>
            <li><a th:href="@{/contacto}">Contacto</a></li>
        </ul>
    </div>

    <div class="nav-right">

        <!-- BUSCADOR DE ESCRITORIO -->
        <form class="search-bar-desktop" th:action="@{/catalogo/buscar}" method="get">
            <input type="text" name="q" placeholder="Buscar productos‚Ä¶" autocomplete="off">
            <button type="submit">üîç</button>
        </form>

        <!-- LOGIN -->
        <a th:href="@{/auth/login}" class="btn-login-desktop">Iniciar Sesi√≥n</a>

        <!-- CARRITO -->
       <a th:href="@{/carrito/ver}" class="btn-carrito-desktop">
    üõí (<span id="carritoCountDesktop">0</span>)
</a>
    </div>
</nav>
<script>
    // Funcionalidad del men√∫ m√≥vil
    function toggleMobileMenu() {
        const menu = document.getElementById('mobileMenu');
        const toggle = document.getElementById('navToggle');
        const isActive = menu.classList.toggle('active');
        
        // Actualizar atributos ARIA
        toggle.setAttribute('aria-expanded', isActive);
        menu.setAttribute('aria-hidden', !isActive);
        
        // Prevenir scroll del body cuando el men√∫ est√° abierto
        document.body.style.overflow = isActive ? 'hidden' : '';
    }

    function cerrarMenuMobile() {
        const menu = document.getElementById('mobileMenu');
        const toggle = document.getElementById('navToggle');
        
        menu.classList.remove('active');
        toggle.setAttribute('aria-expanded', 'false');
        menu.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = '';
    }

    function toggleSearch() {
        const search = document.getElementById('searchExpanded');
        const isActive = search.classList.toggle('active');
        
        search.setAttribute('aria-hidden', !isActive);
        
        if (isActive) {
            // Enfocar el input cuando se abre el buscador
            setTimeout(() => {
                document.getElementById('search-input').focus();
            }, 300);
        } else {
            document.body.style.overflow = '';
        }
        
        document.body.style.overflow = isActive ? 'hidden' : '';
    }

    // Cerrar men√∫ al hacer clic fuera
    function setupClickOutside() {
        document.addEventListener('click', function(event) {
            const menu = document.getElementById('mobileMenu');
            const toggle = document.getElementById('navToggle');
            const search = document.getElementById('searchExpanded');
            
            if (menu.classList.contains('active') && 
                !menu.contains(event.target) && 
                !toggle.contains(event.target)) {
                cerrarMenuMobile();
            }
            
            if (search.classList.contains('active') && 
                !search.contains(event.target)) {
                toggleSearch();
            }
        });
    }

    // Cerrar con tecla Escape
    function setupEscapeKey() {
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                cerrarMenuMobile();
                const search = document.getElementById('searchExpanded');
                if (search.classList.contains('active')) {
                    toggleSearch();
                }
            }
        });
    }

    // Actualizar estado de usuario en el men√∫ m√≥vil
    function actualizarEstadoUsuario() {
        const authLinks = document.getElementById('mobileAuthLinks');
        const userMenu = document.getElementById('mobileUserMenu');
        
        // Simular verificaci√≥n de usuario (debes integrar con tu autenticaci√≥n real)
        const usuarioLogueado = localStorage.getItem('usuarioLogueado') === 'true';
        
        if (usuarioLogueado) {
            authLinks.style.display = 'none';
            userMenu.style.display = 'flex';
        } else {
            authLinks.style.display = 'flex';
            userMenu.style.display = 'none';
        }
    }

    // Simular funciones de autenticaci√≥n (debes integrar con tu backend)
    function mostrarLogin() {
        console.log('Mostrar login...');
        // Tu implementaci√≥n de mostrar login
    }

    function mostrarRegistro() {
        console.log('Mostrar registro...');
        // Tu implementaci√≥n de mostrar registro
    }

    function logout() {
        localStorage.setItem('usuarioLogueado', 'false');
        actualizarEstadoUsuario();
        console.log('Sesi√≥n cerrada');
        // Tu implementaci√≥n de logout
    }

    function mostrarCarrito() {
        console.log('Mostrar carrito...');
        // Tu implementaci√≥n de mostrar carrito
    }

    // Inicializar men√∫ m√≥vil
    document.addEventListener('DOMContentLoaded', function() {
        const navToggle = document.getElementById('navToggle');
        const menuClose = document.getElementById('mobileMenuClose');
        const searchClose = document.getElementById('searchClose');
        
        if (navToggle) {
            navToggle.addEventListener('click', toggleMobileMenu);
        }
        
        if (menuClose) {
            menuClose.addEventListener('click', cerrarMenuMobile);
        }
        
        if (searchClose) {
            searchClose.addEventListener('click', toggleSearch);
        }
        
        setupClickOutside();
        setupEscapeKey();
        actualizarEstadoUsuario();
        
        // Simular usuario logueado para prueba (remover en producci√≥n)
        // localStorage.setItem('usuarioLogueado', 'true');
    });
</script>
</body>
</html>